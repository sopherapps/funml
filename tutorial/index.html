
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="a collection of utilities to help write python as though it were an ML-kind of functional language like OCaml">
      
      
      
        <link rel="canonical" href="https://sopherapps.github.io/funml/tutorial/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../reference/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Getting Started - FunML</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/termynal.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FunML" class="md-header__button md-logo" aria-label="FunML" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FunML
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sopherapps/funml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sopherapps/funml
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FunML" class="md-nav__button md-logo" aria-label="FunML" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FunML
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sopherapps/funml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sopherapps/funml
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        FunML
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-the-script-file" class="md-nav__link">
    Create the Script File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-some-custom-data-types" class="md-nav__link">
    Add Some Custom Data Types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expressions" class="md-nav__link">
    Expressions
  </a>
  
    <nav class="md-nav" aria-label="Expressions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-some-primitive-expressions" class="md-nav__link">
    Add Some Primitive Expressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compose-some-high-order-expressions" class="md-nav__link">
    Compose Some High Order Expressions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-data-to-work-on" class="md-nav__link">
    Add the Data to Work On
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-some-pipelines-and-execute-them" class="md-nav__link">
    Create Some Pipelines and Execute Them
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-script" class="md-nav__link">
    Run the Script
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../change-log/" class="md-nav__link">
        Change Log
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-the-script-file" class="md-nav__link">
    Create the Script File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-some-custom-data-types" class="md-nav__link">
    Add Some Custom Data Types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expressions" class="md-nav__link">
    Expressions
  </a>
  
    <nav class="md-nav" aria-label="Expressions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-some-primitive-expressions" class="md-nav__link">
    Add Some Primitive Expressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compose-some-high-order-expressions" class="md-nav__link">
    Compose Some High Order Expressions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-data-to-work-on" class="md-nav__link">
    Add the Data to Work On
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-some-pipelines-and-execute-them" class="md-nav__link">
    Create Some Pipelines and Execute Them
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-script" class="md-nav__link">
    Run the Script
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="getting-started">Getting Started</h1>
<p>In this tutorial, we will build a simple script that showcases most of the features of FunML.</p>
<h2 id="create-the-script-file">Create the Script File</h2>
<p>Create a file <code>main.py</code>.</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">$ </span>touch<span class="w"> </span>main.py
</code></pre></div>
</div>

<h2 id="add-some-custom-data-types">Add Some Custom Data Types</h2>
<p>FunML allows us to create two types of custom data types:</p>
<ul>
<li>Enums: by subclassing the <code>ml.Enum</code> class</li>
<li>Records: by wrapping <a href="https://docs.python.org/3/library/dataclasses.html">dataclass</a>-like classes with the <code>@record</code> decorator</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We have shortened <code>funml</code> to <code>ml</code> so wherever you see <code>ml</code> take it as <code>funml</code></p>
</div>
<p>Add the following code to <code>main.py</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kn">import</span> <span class="nn">funml</span> <span class="k">as</span> <span class="nn">ml</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="k">class</span> <span class="nc">Date</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">January</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">February</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="n">March</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="n">April</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">May</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="n">June</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="n">July</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="n">August</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="n">September</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="n">October</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>    <span class="n">November</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    <span class="n">December</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="nd">@ml</span><span class="o">.</span><span class="n">record</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="k">class</span> <span class="nc">Color</span><span class="p">:</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    <span class="n">r</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>    <span class="n">g</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>
<h2 id="expressions">Expressions</h2>
<p>The main construct in FunML is the expression.
As long as anything is an expression, it can initialize a pipeline
i.e. added to the beginning of a pipeline.</p>
<p>Anything can be turned into an expression using <code>ml.val</code>.
Functions, static values, variables, name it.</p>
<p>Expressions are the building blocks for more expressions.
Combining multiple expressions creates new expressions</p>
<p>An expression can contain:</p>
<ul>
<li><code>ml.Result</code>, <code>ml.Option</code> and their helpers like <code>ml.is_ok</code>, <code>ml.if_ok</code></li>
<li><code>IList</code> and its helpers <code>ireduce</code>, <code>imap</code>, <code>ifilter</code> etc.</li>
<li><code>Enum</code>'s, <code>Record</code>'s</li>
<li>pattern matching with <code>ml.match().case(...)</code></li>
<li>lambda functions wrapped in <code>ml.val</code> to make them expressions</li>
<li>Even piping with the <code>&gt;&gt;</code> to move data from LEFT to RIGHT through a number of expressions etc.</li>
</ul>
<h3 id="add-some-primitive-expressions">Add Some Primitive Expressions</h3>
<p>We can start with a few primitive expressions.
These we will use later to build more complex expressions.</p>
<p>A typical primitive expression is <code>ml.val(&lt;lambda function&gt;)</code>
But one can also wrap functions/classes from external modules</p>
<p>e.g. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">MlDbConnection</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">DbConnection</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1"># then later, use it as though it was a funml expression.</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">conn</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>            <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> 
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>            <span class="o">&gt;&gt;</span> <span class="n">MlDbConnection</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>            <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">())</span>
</code></pre></div>
<p>We have some builtin primitive expressions like</p>
<ul>
<li><code>ml.val</code></li>
<li><code>ml.match</code></li>
<li><code>ml.execute</code></li>
<li><code>ml.ireduce</code></li>
<li><code>ml.ifilter</code></li>
<li><code>ml.imap</code></li>
<li><code>ml.if_ok</code></li>
<li><code>ml.is_ok</code></li>
<li><code>ml.if_err</code></li>
<li><code>ml.is_err</code></li>
<li><code>ml.if_some</code></li>
<li><code>ml.is_some</code></li>
<li><code>ml.if_none</code></li>
<li><code>ml.is_none</code></li>
<li><code>ml.to_dict</code></li>
<li><code>ml.to_json</code></li>
<li><code>ml.from_json</code></li>
</ul>
<p>So in our script, let's add a <code>main</code> function and in it, add the primitive expressions:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Main program&quot;&quot;&quot;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="sd">    Primitive Expressions</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    <span class="n">unit</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="n">is_even</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="n">mul</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">args</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="n">superscript</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="n">num</span><span class="o">**</span><span class="n">power</span><span class="p">)</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    <span class="n">get_month</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    <span class="n">is_num</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)))</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    <span class="n">is_exp</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="ne">BaseException</span><span class="p">))</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    <span class="n">if_else</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">check</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">else_do</span><span class="o">=</span><span class="n">unit</span><span class="p">:</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>        <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="p">(</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>            <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">do</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">else_do</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>        <span class="p">)()</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>    <span class="p">)</span>
</code></pre></div>
<h3 id="compose-some-high-order-expressions">Compose Some High Order Expressions</h3>
<p>Here we combine the primitive expressions into more complex ones using:</p>
<ul>
<li>normal function calls e.g. <code>if_else(some_stuff)</code> where <code>if_else</code> is a primitive expression</li>
<li>a form of <a href="https://en.wikipedia.org/wiki/Currying">currying</a> e.g. <code>add3 = add(3)</code> where <code>add = lambda x, y: x+y</code></li>
<li>pipelines using the pipeline operator (<code>&gt;&gt;</code>).
  Pipelines let one start with data followed by the steps that operate on that
  data e.g. <code>output = records &gt;&gt; remove_nulls &gt;&gt; parse_json &gt;&gt; ml.execute()</code></li>
<li>chaining primitives that have methods on their outputs that return expressions.
  e.g. <code>output = ml.match(data).case(1, do=...).case(2, do=...).case(3, ...)</code></li>
</ul>
<p>We can combine these complex expressions into even more complex ones to infinite complexity.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>That is the main thing about functional programming i.e. composing simpler functions into more complex functions 
to an indefinite level of complexity BUT while keeping the complex functions readable and predictable (pure).</p>
</div>
<p>In our <code>main</code> function in our script <code>main.py</code>, let's add the following high order expressions.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="sd">    High Order Expressions</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">factorial</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="p">(</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">accum</span><span class="p">))</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="k">lambda</span> <span class="n">num</span><span class="p">,</span> <span class="n">ac</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span> <span class="n">factorial</span><span class="p">(</span><span class="n">num</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">num</span> <span class="o">*</span> <span class="n">ac</span><span class="p">)())</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="c1"># currying expressions is possible</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    <span class="n">cube</span> <span class="o">=</span> <span class="n">superscript</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    <span class="n">get_item_types</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">ireduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    <span class="n">nums_type_err</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>        <span class="k">lambda</span> <span class="n">args</span><span class="p">:</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;expected numbers, got </span><span class="si">{</span><span class="n">get_item_types</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="p">)</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>    <span class="n">is_seq_of_nums</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">ireduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">is_num</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>    <span class="n">to_result</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ml</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">ERR</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_exp</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">else</span> <span class="n">ml</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">OK</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>    <span class="n">try_multiply</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>        <span class="n">if_else</span><span class="p">(</span><span class="n">check</span><span class="o">=</span><span class="n">is_seq_of_nums</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">mul</span><span class="p">,</span> <span class="n">else_do</span><span class="o">=</span><span class="n">nums_type_err</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">to_result</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>    <span class="p">)</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>    <span class="n">result_to_option</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">if_ok</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">Option</span><span class="o">.</span><span class="n">SOME</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">if_err</span><span class="p">(</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>        <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">ml</span><span class="o">.</span><span class="n">Option</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>    <span class="p">)</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>    <span class="n">to_date_enum</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>        <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">(</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>            <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">January</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">February</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">March</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">April</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">May</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">June</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">July</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">August</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">September</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">October</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">November</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">December</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>        <span class="p">)()</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>    <span class="p">)</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>    <span class="n">get_month_str</span> <span class="o">=</span> <span class="n">get_month</span> <span class="o">&gt;&gt;</span> <span class="p">(</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>        <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">()</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;JAN&quot;</span><span class="p">))</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;FEB&quot;</span><span class="p">))</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;MAR&quot;</span><span class="p">))</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;APR&quot;</span><span class="p">))</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;MAY&quot;</span><span class="p">))</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;JUN&quot;</span><span class="p">))</span>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;JUL&quot;</span><span class="p">))</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;AUG&quot;</span><span class="p">))</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;SEP&quot;</span><span class="p">))</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;OCT&quot;</span><span class="p">))</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;NOV&quot;</span><span class="p">))</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;DEC&quot;</span><span class="p">))</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>    <span class="p">)</span>
</code></pre></div>
<h2 id="add-the-data-to-work-on">Add the Data to Work On</h2>
<p>We have a number of data types that are work well with FunML</p>
<ul>
<li>IList: an immutable list, with pattern matching enabled </li>
<li>Enum: an enumerable data type, with pattern matching enabled</li>
<li>Record: a record-like data type, with pattern matching enabled</li>
</ul>
<p>Using our High order expressions (and primitive ones, your choice), we operate on the data.</p>
<p>In order to add data variables to pipelines, we turn them into expressions using <code>ml.val</code>
e.g. <code>ml.val(90)</code> becomes an expression that evaluates to <code>lambda: 90</code>.</p>
<p>Remember, when evaluating pipelines, we start with the data, then the steps of transformation
it has to go through.</p>
<p>Let's add some data to the <code>main</code> function in our script <code>main.py</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="sd">    Data</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">1993</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">1228</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    <span class="p">]</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    <span class="n">dates</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    <span class="n">nums</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">l</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">l</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;hey&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mf">8.1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>    <span class="n">blue</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
</code></pre></div>
<h2 id="create-some-pipelines-and-execute-them">Create Some Pipelines and Execute Them</h2>
<p>To construct pipelines, we use <code>&gt;&gt;</code> starting with an expression or data wrapped in <code>ml.val</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If we don't add data before the pipeline, we will have to add it in another step later.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>We prefer putting data before transformations in pipelines because it is more readable (<em>usually</em>).</p>
<p>However, you might discover that it is also possible to save a pipeline and invoke it on the data like a normal function.</p>
<p>Try not to do that.</p>
</div>
<p>Pipelines move data from left to right, transforming it from one step to the next.</p>
<p>Pipelines are lazily evaluated. To evaluate/execute a pipeline, we add <code>ml.execute()</code> as the last step of the pipeline.
This transforms the inputs into some output and returns the output.</p>
<p>Otherwise, we can keep adding steps to such a pipeline across different sections of the code.</p>
<p>Alright, let's create and evaluate some pipelines.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>    <span class="n">dates_as_enums</span> <span class="o">=</span> <span class="n">dates</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">to_date_enum</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">dates as enums: </span><span class="si">{</span><span class="n">dates_as_enums</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">first date enum: </span><span class="si">{</span><span class="n">dates_as_enums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="n">months_as_str</span> <span class="o">=</span> <span class="n">dates</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">get_month_str</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">months of dates as str:</span><span class="se">\n</span><span class="si">{</span><span class="n">months_as_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">cube of 5: </span><span class="si">{</span><span class="n">cube</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    <span class="n">even_nums_pipeline</span> <span class="o">=</span> <span class="n">nums</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">is_even</span><span class="p">)</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    <span class="c1"># here `even_nums_pipeline` is a `Pipeline` instance</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">even_nums_pipeline</span><span class="p">)</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>    <span class="n">factorials_list</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>        <span class="n">copy</span><span class="p">(</span><span class="n">even_nums_pipeline</span><span class="p">)</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;factorial for </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">factorial</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>    <span class="p">)</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>    <span class="c1"># we created a new pipeline by coping the previous one</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>    <span class="c1"># otherwise we would be mutating the old pipeline.</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>    <span class="c1"># Calling ml.execute(), we get an actual iterable of strings</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">factorials_list</span><span class="p">)</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>    <span class="n">factorials_str</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>        <span class="n">even_nums_pipeline</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;factorial for </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">factorial</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">ireduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>    <span class="p">)</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>    <span class="c1"># here after calling ml.execute(), we get one string as output</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">factorials_str</span><span class="p">)</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;blue: </span><span class="si">{</span><span class="n">blue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">try_multiply</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">after multiplication:</span><span class="se">\n</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>    <span class="n">data_as_options</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">result_to_option</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">data as options: </span><span class="si">{</span><span class="n">data_as_options</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>    <span class="n">data_as_actual_values</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>        <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">is_ok</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">if_ok</span><span class="p">(</span><span class="n">unit</span><span class="p">))</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>    <span class="p">)</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">data as actual values: </span><span class="si">{</span><span class="n">data_as_actual_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="run-the-script">Run the Script</h2>
<p>To run the <code>main</code> function, we need to add the following code at the end of the <code>main.py</code> script.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>The final script should look like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="kn">import</span> <span class="nn">funml</span> <span class="k">as</span> <span class="nn">ml</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="k">class</span> <span class="nc">Date</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">January</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="n">February</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    <span class="n">March</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="n">April</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>    <span class="n">May</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    <span class="n">June</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="n">July</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>    <span class="n">August</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>    <span class="n">September</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>    <span class="n">October</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>    <span class="n">November</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>    <span class="n">December</span> <span class="o">=</span> <span class="n">date</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="nd">@ml</span><span class="o">.</span><span class="n">record</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="k">class</span> <span class="nc">Color</span><span class="p">:</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>    <span class="n">r</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>    <span class="n">g</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Main program&quot;&quot;&quot;</span>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="sd">    Primitive Expressions</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a>    <span class="n">unit</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">)</span>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>    <span class="n">is_even</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a>    <span class="n">mul</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">args</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>    <span class="n">superscript</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="n">num</span><span class="o">**</span><span class="n">power</span><span class="p">)</span>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a>    <span class="n">get_month</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a>    <span class="n">is_num</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)))</span>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>    <span class="n">is_exp</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="ne">BaseException</span><span class="p">))</span>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a>    <span class="n">if_else</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">check</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">else_do</span><span class="o">=</span><span class="n">unit</span><span class="p">:</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a>        <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="p">(</span>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>            <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">do</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">else_do</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a>        <span class="p">)()</span>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>    <span class="p">)</span>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="sd">    High Order Expressions</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>    <span class="n">factorial</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="p">(</span>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>        <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">v</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">accum</span><span class="p">))</span>
<a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="k">lambda</span> <span class="n">num</span><span class="p">,</span> <span class="n">ac</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span> <span class="n">factorial</span><span class="p">(</span><span class="n">num</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">accum</span><span class="o">=</span><span class="n">num</span> <span class="o">*</span> <span class="n">ac</span><span class="p">)())</span>
<a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a>    <span class="p">)</span>
<a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a>    <span class="c1"># currying expressions is possible</span>
<a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a>    <span class="n">cube</span> <span class="o">=</span> <span class="n">superscript</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a>    <span class="n">get_item_types</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">ireduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a>    <span class="n">nums_type_err</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span>
<a id="__codelineno-8-63" name="__codelineno-8-63" href="#__codelineno-8-63"></a>        <span class="k">lambda</span> <span class="n">args</span><span class="p">:</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;expected numbers, got </span><span class="si">{</span><span class="n">get_item_types</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-64" name="__codelineno-8-64" href="#__codelineno-8-64"></a>    <span class="p">)</span>
<a id="__codelineno-8-65" name="__codelineno-8-65" href="#__codelineno-8-65"></a>    <span class="n">is_seq_of_nums</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">ireduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">is_num</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-66" name="__codelineno-8-66" href="#__codelineno-8-66"></a>    <span class="n">to_result</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ml</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">ERR</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_exp</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">else</span> <span class="n">ml</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">OK</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<a id="__codelineno-8-67" name="__codelineno-8-67" href="#__codelineno-8-67"></a>
<a id="__codelineno-8-68" name="__codelineno-8-68" href="#__codelineno-8-68"></a>    <span class="n">try_multiply</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-8-69" name="__codelineno-8-69" href="#__codelineno-8-69"></a>        <span class="n">if_else</span><span class="p">(</span><span class="n">check</span><span class="o">=</span><span class="n">is_seq_of_nums</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">mul</span><span class="p">,</span> <span class="n">else_do</span><span class="o">=</span><span class="n">nums_type_err</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">to_result</span>
<a id="__codelineno-8-70" name="__codelineno-8-70" href="#__codelineno-8-70"></a>    <span class="p">)</span>
<a id="__codelineno-8-71" name="__codelineno-8-71" href="#__codelineno-8-71"></a>
<a id="__codelineno-8-72" name="__codelineno-8-72" href="#__codelineno-8-72"></a>    <span class="n">result_to_option</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">if_ok</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">Option</span><span class="o">.</span><span class="n">SOME</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">if_err</span><span class="p">(</span>
<a id="__codelineno-8-73" name="__codelineno-8-73" href="#__codelineno-8-73"></a>        <span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">ml</span><span class="o">.</span><span class="n">Option</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span>
<a id="__codelineno-8-74" name="__codelineno-8-74" href="#__codelineno-8-74"></a>    <span class="p">)</span>
<a id="__codelineno-8-75" name="__codelineno-8-75" href="#__codelineno-8-75"></a>    <span class="n">to_date_enum</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span>
<a id="__codelineno-8-76" name="__codelineno-8-76" href="#__codelineno-8-76"></a>        <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">(</span>
<a id="__codelineno-8-77" name="__codelineno-8-77" href="#__codelineno-8-77"></a>            <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
<a id="__codelineno-8-78" name="__codelineno-8-78" href="#__codelineno-8-78"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">January</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-79" name="__codelineno-8-79" href="#__codelineno-8-79"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">February</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-80" name="__codelineno-8-80" href="#__codelineno-8-80"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">March</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-81" name="__codelineno-8-81" href="#__codelineno-8-81"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">April</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-82" name="__codelineno-8-82" href="#__codelineno-8-82"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">May</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-83" name="__codelineno-8-83" href="#__codelineno-8-83"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">June</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-84" name="__codelineno-8-84" href="#__codelineno-8-84"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">July</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-85" name="__codelineno-8-85" href="#__codelineno-8-85"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">August</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-86" name="__codelineno-8-86" href="#__codelineno-8-86"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">September</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-87" name="__codelineno-8-87" href="#__codelineno-8-87"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">October</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-88" name="__codelineno-8-88" href="#__codelineno-8-88"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">November</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-89" name="__codelineno-8-89" href="#__codelineno-8-89"></a>            <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">December</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
<a id="__codelineno-8-90" name="__codelineno-8-90" href="#__codelineno-8-90"></a>        <span class="p">)()</span>
<a id="__codelineno-8-91" name="__codelineno-8-91" href="#__codelineno-8-91"></a>    <span class="p">)</span>
<a id="__codelineno-8-92" name="__codelineno-8-92" href="#__codelineno-8-92"></a>    <span class="n">get_month_str</span> <span class="o">=</span> <span class="n">get_month</span> <span class="o">&gt;&gt;</span> <span class="p">(</span>
<a id="__codelineno-8-93" name="__codelineno-8-93" href="#__codelineno-8-93"></a>        <span class="n">ml</span><span class="o">.</span><span class="n">match</span><span class="p">()</span>
<a id="__codelineno-8-94" name="__codelineno-8-94" href="#__codelineno-8-94"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;JAN&quot;</span><span class="p">))</span>
<a id="__codelineno-8-95" name="__codelineno-8-95" href="#__codelineno-8-95"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;FEB&quot;</span><span class="p">))</span>
<a id="__codelineno-8-96" name="__codelineno-8-96" href="#__codelineno-8-96"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;MAR&quot;</span><span class="p">))</span>
<a id="__codelineno-8-97" name="__codelineno-8-97" href="#__codelineno-8-97"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;APR&quot;</span><span class="p">))</span>
<a id="__codelineno-8-98" name="__codelineno-8-98" href="#__codelineno-8-98"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;MAY&quot;</span><span class="p">))</span>
<a id="__codelineno-8-99" name="__codelineno-8-99" href="#__codelineno-8-99"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;JUN&quot;</span><span class="p">))</span>
<a id="__codelineno-8-100" name="__codelineno-8-100" href="#__codelineno-8-100"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;JUL&quot;</span><span class="p">))</span>
<a id="__codelineno-8-101" name="__codelineno-8-101" href="#__codelineno-8-101"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;AUG&quot;</span><span class="p">))</span>
<a id="__codelineno-8-102" name="__codelineno-8-102" href="#__codelineno-8-102"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;SEP&quot;</span><span class="p">))</span>
<a id="__codelineno-8-103" name="__codelineno-8-103" href="#__codelineno-8-103"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;OCT&quot;</span><span class="p">))</span>
<a id="__codelineno-8-104" name="__codelineno-8-104" href="#__codelineno-8-104"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;NOV&quot;</span><span class="p">))</span>
<a id="__codelineno-8-105" name="__codelineno-8-105" href="#__codelineno-8-105"></a>        <span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">do</span><span class="o">=</span><span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">&quot;DEC&quot;</span><span class="p">))</span>
<a id="__codelineno-8-106" name="__codelineno-8-106" href="#__codelineno-8-106"></a>    <span class="p">)</span>
<a id="__codelineno-8-107" name="__codelineno-8-107" href="#__codelineno-8-107"></a>
<a id="__codelineno-8-108" name="__codelineno-8-108" href="#__codelineno-8-108"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-109" name="__codelineno-8-109" href="#__codelineno-8-109"></a><span class="sd">    Data</span>
<a id="__codelineno-8-110" name="__codelineno-8-110" href="#__codelineno-8-110"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-111" name="__codelineno-8-111" href="#__codelineno-8-111"></a>    <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-8-112" name="__codelineno-8-112" href="#__codelineno-8-112"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<a id="__codelineno-8-113" name="__codelineno-8-113" href="#__codelineno-8-113"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<a id="__codelineno-8-114" name="__codelineno-8-114" href="#__codelineno-8-114"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">1993</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span>
<a id="__codelineno-8-115" name="__codelineno-8-115" href="#__codelineno-8-115"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
<a id="__codelineno-8-116" name="__codelineno-8-116" href="#__codelineno-8-116"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<a id="__codelineno-8-117" name="__codelineno-8-117" href="#__codelineno-8-117"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">2004</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
<a id="__codelineno-8-118" name="__codelineno-8-118" href="#__codelineno-8-118"></a>        <span class="n">date</span><span class="p">(</span><span class="mi">1228</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
<a id="__codelineno-8-119" name="__codelineno-8-119" href="#__codelineno-8-119"></a>    <span class="p">]</span>
<a id="__codelineno-8-120" name="__codelineno-8-120" href="#__codelineno-8-120"></a>    <span class="n">dates</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>
<a id="__codelineno-8-121" name="__codelineno-8-121" href="#__codelineno-8-121"></a>    <span class="n">nums</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">l</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-8-122" name="__codelineno-8-122" href="#__codelineno-8-122"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">l</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;hey&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mf">8.1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<a id="__codelineno-8-123" name="__codelineno-8-123" href="#__codelineno-8-123"></a>    <span class="n">blue</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-8-124" name="__codelineno-8-124" href="#__codelineno-8-124"></a>
<a id="__codelineno-8-125" name="__codelineno-8-125" href="#__codelineno-8-125"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-126" name="__codelineno-8-126" href="#__codelineno-8-126"></a><span class="sd">    Pipeline Creation and Execution</span>
<a id="__codelineno-8-127" name="__codelineno-8-127" href="#__codelineno-8-127"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-128" name="__codelineno-8-128" href="#__codelineno-8-128"></a>    <span class="n">dates_as_enums</span> <span class="o">=</span> <span class="n">dates</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">to_date_enum</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-129" name="__codelineno-8-129" href="#__codelineno-8-129"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">dates as enums: </span><span class="si">{</span><span class="n">dates_as_enums</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-130" name="__codelineno-8-130" href="#__codelineno-8-130"></a>
<a id="__codelineno-8-131" name="__codelineno-8-131" href="#__codelineno-8-131"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">first date enum: </span><span class="si">{</span><span class="n">dates_as_enums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-132" name="__codelineno-8-132" href="#__codelineno-8-132"></a>
<a id="__codelineno-8-133" name="__codelineno-8-133" href="#__codelineno-8-133"></a>    <span class="n">months_as_str</span> <span class="o">=</span> <span class="n">dates</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">get_month_str</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-134" name="__codelineno-8-134" href="#__codelineno-8-134"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">months of dates as str:</span><span class="se">\n</span><span class="si">{</span><span class="n">months_as_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-135" name="__codelineno-8-135" href="#__codelineno-8-135"></a>
<a id="__codelineno-8-136" name="__codelineno-8-136" href="#__codelineno-8-136"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">cube of 5: </span><span class="si">{</span><span class="n">cube</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-137" name="__codelineno-8-137" href="#__codelineno-8-137"></a>
<a id="__codelineno-8-138" name="__codelineno-8-138" href="#__codelineno-8-138"></a>    <span class="n">even_nums_pipeline</span> <span class="o">=</span> <span class="n">nums</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">is_even</span><span class="p">)</span>
<a id="__codelineno-8-139" name="__codelineno-8-139" href="#__codelineno-8-139"></a>    <span class="c1"># here `even_nums_pipeline` is a `Pipeline` instance</span>
<a id="__codelineno-8-140" name="__codelineno-8-140" href="#__codelineno-8-140"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">even_nums_pipeline</span><span class="p">)</span>
<a id="__codelineno-8-141" name="__codelineno-8-141" href="#__codelineno-8-141"></a>
<a id="__codelineno-8-142" name="__codelineno-8-142" href="#__codelineno-8-142"></a>    <span class="n">factorials_list</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-8-143" name="__codelineno-8-143" href="#__codelineno-8-143"></a>        <span class="n">copy</span><span class="p">(</span><span class="n">even_nums_pipeline</span><span class="p">)</span>
<a id="__codelineno-8-144" name="__codelineno-8-144" href="#__codelineno-8-144"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;factorial for </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">factorial</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-145" name="__codelineno-8-145" href="#__codelineno-8-145"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-146" name="__codelineno-8-146" href="#__codelineno-8-146"></a>    <span class="p">)</span>
<a id="__codelineno-8-147" name="__codelineno-8-147" href="#__codelineno-8-147"></a>    <span class="c1"># we created a new pipeline by coping the previous one</span>
<a id="__codelineno-8-148" name="__codelineno-8-148" href="#__codelineno-8-148"></a>    <span class="c1"># otherwise we would be mutating the old pipeline.</span>
<a id="__codelineno-8-149" name="__codelineno-8-149" href="#__codelineno-8-149"></a>    <span class="c1"># Calling ml.execute(), we get an actual iterable of strings</span>
<a id="__codelineno-8-150" name="__codelineno-8-150" href="#__codelineno-8-150"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">factorials_list</span><span class="p">)</span>
<a id="__codelineno-8-151" name="__codelineno-8-151" href="#__codelineno-8-151"></a>
<a id="__codelineno-8-152" name="__codelineno-8-152" href="#__codelineno-8-152"></a>    <span class="n">factorials_str</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-8-153" name="__codelineno-8-153" href="#__codelineno-8-153"></a>        <span class="n">even_nums_pipeline</span>
<a id="__codelineno-8-154" name="__codelineno-8-154" href="#__codelineno-8-154"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;factorial for </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">factorial</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-155" name="__codelineno-8-155" href="#__codelineno-8-155"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">ireduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-156" name="__codelineno-8-156" href="#__codelineno-8-156"></a>        <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-157" name="__codelineno-8-157" href="#__codelineno-8-157"></a>    <span class="p">)</span>
<a id="__codelineno-8-158" name="__codelineno-8-158" href="#__codelineno-8-158"></a>    <span class="c1"># here after calling ml.execute(), we get one string as output</span>
<a id="__codelineno-8-159" name="__codelineno-8-159" href="#__codelineno-8-159"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">factorials_str</span><span class="p">)</span>
<a id="__codelineno-8-160" name="__codelineno-8-160" href="#__codelineno-8-160"></a>
<a id="__codelineno-8-161" name="__codelineno-8-161" href="#__codelineno-8-161"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;blue: </span><span class="si">{</span><span class="n">blue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-162" name="__codelineno-8-162" href="#__codelineno-8-162"></a>
<a id="__codelineno-8-163" name="__codelineno-8-163" href="#__codelineno-8-163"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">try_multiply</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-164" name="__codelineno-8-164" href="#__codelineno-8-164"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">after multiplication:</span><span class="se">\n</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-165" name="__codelineno-8-165" href="#__codelineno-8-165"></a>
<a id="__codelineno-8-166" name="__codelineno-8-166" href="#__codelineno-8-166"></a>    <span class="n">data_as_options</span> <span class="o">=</span> <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">result_to_option</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-167" name="__codelineno-8-167" href="#__codelineno-8-167"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">data as options: </span><span class="si">{</span><span class="n">data_as_options</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-168" name="__codelineno-8-168" href="#__codelineno-8-168"></a>
<a id="__codelineno-8-169" name="__codelineno-8-169" href="#__codelineno-8-169"></a>    <span class="n">data_as_actual_values</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-8-170" name="__codelineno-8-170" href="#__codelineno-8-170"></a>        <span class="n">ml</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">is_ok</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="n">ml</span><span class="o">.</span><span class="n">if_ok</span><span class="p">(</span><span class="n">unit</span><span class="p">))</span> <span class="o">&gt;&gt;</span> <span class="n">ml</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<a id="__codelineno-8-171" name="__codelineno-8-171" href="#__codelineno-8-171"></a>    <span class="p">)</span>
<a id="__codelineno-8-172" name="__codelineno-8-172" href="#__codelineno-8-172"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">data as actual values: </span><span class="si">{</span><span class="n">data_as_actual_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-173" name="__codelineno-8-173" href="#__codelineno-8-173"></a>
<a id="__codelineno-8-174" name="__codelineno-8-174" href="#__codelineno-8-174"></a>
<a id="__codelineno-8-175" name="__codelineno-8-175" href="#__codelineno-8-175"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-8-176" name="__codelineno-8-176" href="#__codelineno-8-176"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>And then run the script  in the terminal with:</p>
<div class="termy">

<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="gp">$ </span>python<span class="w"> </span>main.py
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="go">dates as enums: [&amp;lt;Date.March: (datetime.date(200, 3, 4),)&amp;gt;, &amp;lt;Date.January: (datetime.date(2009, 1, 16),)&amp;gt;, &amp;lt;Date.December: (datetime.date(1993, 12, 29),)&amp;gt;, &amp;lt;Date.October: (datetime.date(2004, 10, 13),)&amp;gt;, &amp;lt;Date.September: (datetime.date(2020, 9, 5),)&amp;gt;, &amp;lt;Date.May: (datetime.date(2004, 5, 7),)&amp;gt;, &amp;lt;Date.August: (datetime.date(1228, 8, 18),)&amp;gt;]</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="go">first date enum: &amp;lt;Date.March: (datetime.date(200, 3, 4),)&amp;gt;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="go">months of dates as str:</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="go">[MAR, JAN, DEC, OCT, SEP, MAY, AUG]</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="go">cube of 5: 125</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="go">&amp;lt;funml.types.Pipeline object at 0x1039ce690&amp;gt;</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="go">[factorial for 12: 479001600, factorial for 8: 40320, factorial for 6: 720]</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="go">factorial for 12: 479001600</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="go">factorial for 8: 40320</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="go">factorial for 6: 720</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="go">blue: {&#39;a&#39;: 1, &#39;r&#39;: 0, &#39;g&#39;: 0, &#39;b&#39;: 255}</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="go">after multiplication:</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="go">[&amp;lt;Result.OK: 6&amp;gt;, &amp;lt;Result.ERR: TypeError(&quot;expected numbers, got &amp;lt;class &#39;str&#39;&amp;gt;, &amp;lt;class &#39;int&#39;&amp;gt;&quot;)&amp;gt;, &amp;lt;Result.ERR: TypeError(&quot;expected numbers, got &amp;lt;class &#39;int&#39;&amp;gt;, &amp;lt;class &#39;str&#39;&amp;gt;&quot;)&amp;gt;, &amp;lt;Result.OK: 48.599999999999994&amp;gt;]</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="go">data as options: [&amp;lt;Option.SOME: 6&amp;gt;, &amp;lt;Option.NONE: &#39;NONE&#39;&amp;gt;, &amp;lt;Option.NONE: &#39;NONE&#39;&amp;gt;, &amp;lt;Option.SOME: 48.599999999999994&amp;gt;]</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="go">data as actual values: [6, 48.599999999999994]</span>
</code></pre></div>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "content.tabs.link"], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="../js/termynal.js"></script>
      
        <script src="../js/custom.js"></script>
      
    
  </body>
</html>